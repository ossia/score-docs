{"Document":{"ObjectName":"Scenario::ScenarioDocumentModel","id":1,"BaseScenario":{"ObjectName":"Scenario::BaseScenario","id":0,"Constraint":{"ObjectName":"Scenario::IntervalModel","id":0,"Metadata":{"ScriptingName":"gltf-checkers","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Inlet":{"uuid":"a1574bb0-cbd4-4c7d-9417-0c25cfd1187b","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"Audio in","Exposed":"audio in"},"Outlet":{"uuid":"a1d97535-18ac-444a-8417-0cbc1692d897","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"Audio out","Exposed":"audio out","Address":"audio:/out/main","GainInlet":{"uuid":"9a13fb32-269a-47bf-99a9-930188c1f19c","ObjectName":"Inlet","id":10000,"Hidden":false,"Custom":"Gain","Exposed":"gain","Value":{},"Init":{},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},"PanInlet":{"uuid":"9a13fb32-269a-47bf-99a9-930188c1f19c","ObjectName":"Inlet","id":10001,"Hidden":false,"Custom":"Pan","Exposed":"pan","Value":{},"Init":{},"Domain":{}},"Gain":1.0,"Pan":[1.0,1.0],"Propagate":true},"Processes":[{"uuid":"7be51631-fb4b-4152-9ca7-86fdafa8a989","ObjectName":"Display","id":21,"Metadata":{"ScriptingName":"Text Box.23","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-974.6858643618164,-360.2804164137206],"Size":[747.609375,83.0],"Loops":false,"Inlets":[{"uuid":"9ae797ea-d94c-4792-acec-9ec1932bae5d","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"in","Exposed":"in","Value":{"String":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><meta charset=\"utf-8\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\nhr { height: 1px; border-width: 0; }\nli.unchecked::marker { content: \"\\2610\"; }\nli.checked::marker { content: \"\\2612\"; }\n</style></head><body style=\" font-family:'Ubuntu'; font-size:10pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">The example uses the following assets <br />(not shipped as they are too heavy):<br />- https://github.com/KhronosGroup/glTF-Sample-Assets/blob/main/Models/ABeautifulGame/glTF-Binary/ABeautifulGame.glb<br />- https://dl.polyhaven.org/file/ph-assets/HDRIs/exr/4k/resting_place_4k.exr<br />But feel free to swap your own!</p></body></html>"},"Init":{"String":"(Double-click to edit)"},"Domain":{}}],"Outlets":[]},{"uuid":"7be51631-fb4b-4152-9ca7-86fdafa8a989","ObjectName":"Display","id":20,"Metadata":{"ScriptingName":"Text Box.22","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-986.3217272460936,56.98724729785158],"Size":[205.109375,38.0],"Loops":false,"Inlets":[{"uuid":"9ae797ea-d94c-4792-acec-9ec1932bae5d","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"in","Exposed":"in","Value":{"String":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><meta charset=\"utf-8\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\nhr { height: 1px; border-width: 0; }\nli.unchecked::marker { content: \"\\2610\"; }\nli.checked::marker { content: \"\\2612\"; }\n</style></head><body style=\" font-family:'Ubuntu'; font-size:10pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">Adjust the gain here if the visuals<br />are too <span style=\" font-style:italic;\">intense</span>.</p></body></html>"},"Init":{"String":"(Double-click to edit)"},"Domain":{}}],"Outlets":[]},{"uuid":"7be51631-fb4b-4152-9ca7-86fdafa8a989","ObjectName":"Display","id":19,"Metadata":{"ScriptingName":"Text Box.20","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-182.45297724609372,-83.95856747753908],"Size":[309.796875,23.0],"Loops":false,"Inlets":[{"uuid":"9ae797ea-d94c-4792-acec-9ec1932bae5d","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"in","Exposed":"in","Value":{"String":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><meta charset=\"utf-8\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\nhr { height: 1px; border-width: 0; }\nli.unchecked::marker { content: \"\\2610\"; }\nli.checked::marker { content: \"\\2612\"; }\n</style></head><body style=\" font-family:'Ubuntu'; font-size:10pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">Sync our LFO to the beat to reset the distort effect</p></body></html>"},"Init":{"String":"(Double-click to edit)"},"Domain":{}}],"Outlets":[]},{"uuid":"7be51631-fb4b-4152-9ca7-86fdafa8a989","ObjectName":"Display","id":18,"Metadata":{"ScriptingName":"Text Box.19","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-61.296727246093724,-288.4585674775391],"Size":[193.53125,23.0],"Loops":false,"Inlets":[{"uuid":"9ae797ea-d94c-4792-acec-9ec1932bae5d","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"in","Exposed":"in","Value":{"String":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><meta charset=\"utf-8\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\nhr { height: 1px; border-width: 0; }\nli.unchecked::marker { content: \"\\2610\"; }\nli.checked::marker { content: \"\\2612\"; }\n</style></head><body style=\" font-family:'Ubuntu'; font-size:10pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">Here we have fun with shaders.</p></body></html>"},"Init":{"String":"(Double-click to edit)"},"Domain":{}}],"Outlets":[]},{"uuid":"7be51631-fb4b-4152-9ca7-86fdafa8a989","ObjectName":"Display","id":17,"Metadata":{"ScriptingName":"Text Box","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-972.2967272460937,-476.4585674775391],"Size":[423.140625,83.0],"Loops":false,"Inlets":[{"uuid":"9ae797ea-d94c-4792-acec-9ec1932bae5d","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"in","Exposed":"in","Value":{"String":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><meta charset=\"utf-8\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\nhr { height: 1px; border-width: 0; }\nli.unchecked::marker { content: \"\\2610\"; }\nli.checked::marker { content: \"\\2612\"; }\n</style></head><body style=\" font-family:'Ubuntu'; font-size:10pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">This example showcases the integration of a QtQuick 3D render pass<br />in our render pipeline. <br />The glTF object below loads a glTF scene and an environment map and <br />renders the whole.<br />The scene is interactive with mouse and keyboard (WASD)</p></body></html>"},"Init":{"String":"(Double-click to edit)"},"Domain":{}}],"Outlets":[]},{"uuid":"1e17e479-3513-44c8-a8a7-017be9f6ac8a","ObjectName":"LFO","id":16,"Metadata":{"ScriptingName":"LFO","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-181.29672724609372,-30.458567477539077],"Size":[278.0,105.0],"Loops":false,"Inlets":[{"uuid":"5554eb67-bcc8-45ab-8ec2-37a3f191aa64","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"Freq.","Exposed":"freq.","Value":{"Float":1.0},"Init":{"Float":1.0},"Domain":{"Float":{"Min":0.009999999776482582,"Max":100.0}}},{"uuid":"82427d27-084a-4ab6-9c4e-db83929a1200","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"Ampl.","Exposed":"ampl.","Value":{"Float":0.5},"Init":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":2.0}}},{"uuid":"82427d27-084a-4ab6-9c4e-db83929a1200","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"Offset","Exposed":"offset","Value":{"Float":0.5},"Init":{"Float":0.5},"Domain":{"Float":{"Min":-1.0,"Max":1.0}}},{"uuid":"82427d27-084a-4ab6-9c4e-db83929a1200","ObjectName":"Inlet","id":3,"Hidden":true,"Custom":"Jitter","Exposed":"jitter","Value":{"Float":0.0},"Init":{"Float":0.0},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"82427d27-084a-4ab6-9c4e-db83929a1200","ObjectName":"Inlet","id":4,"Hidden":true,"Custom":"Phase","Exposed":"phase","Value":{"Float":0.0},"Init":{"Float":0.0},"Domain":{"Float":{"Min":-1.0,"Max":1.0}}},{"uuid":"8b1d76c4-3838-4ac0-9b9c-c12bc5db8e8a","ObjectName":"Inlet","id":5,"Hidden":true,"Custom":"Waveform","Exposed":"waveform","Value":{"String":"Square"},"Init":{"String":"Sin"},"Domain":{"String":{"Values":["Sin","Triangle","Saw","Square","SampleAndHold","Noise1","Noise2","Noise3"]}},"Values":["Sin","Triangle","Saw","Square","SampleAndHold","Noise1","Noise2","Noise3"],"Pixmaps":[":/icons/wave_sin_off.png",":/icons/wave_sin_on.png",":/icons/wave_triangle_off.png",":/icons/wave_triangle_on.png",":/icons/wave_saw_off.png",":/icons/wave_saw_on.png",":/icons/wave_square_off.png",":/icons/wave_square_on.png",":/icons/wave_sample_and_hold_off.png",":/icons/wave_sample_and_hold_on.png",":/icons/wave_noise1_off.png",":/icons/wave_noise1_on.png",":/icons/wave_noise2_off.png",":/icons/wave_noise2_on.png",":/icons/wave_noise3_off.png",":/icons/wave_noise3_on.png"]},{"uuid":"485680cc-b8b9-4a01-acc7-3e8334bdc016","ObjectName":"Inlet","id":6,"Hidden":true,"Custom":"Quantification","Exposed":"quantification","Value":{"Float":0.125},"Init":{"Float":0.25},"Domain":{"Float":{"Values":[0.0,1.0,0.5,0.25,0.125,0.0625,0.03125,0.015625,0.75,0.375,0.1875,0.09375,0.046875]}},"Values":[["None",{"Float":0.0}],["Whole",{"Float":1.0}],["Half",{"Float":0.5}],["4th",{"Float":0.25}],["8th",{"Float":0.125}],["16th",{"Float":0.0625}],["32th",{"Float":0.03125}],["64th",{"Float":0.015625}],["Dotted Half",{"Float":0.75}],["Dotted 4th",{"Float":0.375}],["Dotted 8th",{"Float":0.1875}],["Dotted 16th",{"Float":0.09375}],["Dotted 32th",{"Float":0.046875}]]}],"Outlets":[{"uuid":"cff96158-cc72-46d7-99dc-b6038171375b","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"Out","Exposed":"out"}]},{"uuid":"74ca45ff-92c9-44a0-8f1a-754dea05ee1b","ObjectName":"gfxProcess","id":15,"Metadata":{"ScriptingName":"Optical Flow Distort","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[152.05312500000002,-225.89],"Size":[88.6875,22.0],"Loops":false,"Vertex":"#if __VERSION__ <= 120\nvarying vec2 left_coord;\nvarying vec2 right_coord;\nvarying vec2 above_coord;\nvarying vec2 below_coord;\n\nvarying vec2 lefta_coord;\nvarying vec2 righta_coord;\nvarying vec2 leftb_coord;\nvarying vec2 rightb_coord;\n#else\nout vec2 left_coord;\nout vec2 right_coord;\nout vec2 above_coord;\nout vec2 below_coord;\n\nout vec2 lefta_coord;\nout vec2 righta_coord;\nout vec2 leftb_coord;\nout vec2 rightb_coord;\n#endif\n\n\nvoid main()\n{\n\tisf_vertShaderInit();\n\tvec2 texc = vec2(isf_FragNormCoord[0],isf_FragNormCoord[1]);\n\tvec2 d = 4.0/RENDERSIZE;\n\n\tleft_coord = clamp(vec2(texc.xy + vec2(-d.x , 0)),0.0,1.0);\n\tright_coord = clamp(vec2(texc.xy + vec2(d.x , 0)),0.0,1.0);\n\tabove_coord = clamp(vec2(texc.xy + vec2(0,d.y)),0.0,1.0);\n\tbelow_coord = clamp(vec2(texc.xy + vec2(0,-d.y)),0.0,1.0);\n\n\tlefta_coord = clamp(vec2(texc.xy + vec2(-d.x , d.x)),0.0,1.0);\n\trighta_coord = clamp(vec2(texc.xy + vec2(d.x , d.x)),0.0,1.0);\n\tleftb_coord = clamp(vec2(texc.xy + vec2(-d.x , -d.x)),0.0,1.0);\n\trightb_coord = clamp(vec2(texc.xy + vec2(d.x , -d.x)),0.0,1.0);\n}","Fragment":"/*{\n    \"CATEGORIES\": [\n        \"Distortion Effect\",\n        \"Stylize\"\n    ],\n    \"CREDIT\": \"by VIDVOX, based on original implementation by Andrew Benson and v002\",\n    \"DESCRIPTION\": \"Uses an optical flow mask to create a distortion\",\n    \"INPUTS\": [\n        {\n            \"NAME\": \"inputImage\",\n            \"TYPE\": \"image\"\n        },\n        {\n            \"DEFAULT\": 0.5,\n            \"LABEL\": \"Distortion Amount\",\n            \"MAX\": 1,\n            \"MIN\": 0,\n            \"NAME\": \"amt\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 0.98,\n            \"LABEL\": \"Flow Persistence\",\n            \"MAX\": 1,\n            \"MIN\": 0,\n            \"NAME\": \"maskHold\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 2,\n            \"LABEL\": \"Scale\",\n            \"MAX\": 10,\n            \"MIN\": 0,\n            \"NAME\": \"inputScale\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 0.1,\n            \"LABEL\": \"Offset\",\n            \"MAX\": 1,\n            \"MIN\": 0,\n            \"NAME\": \"inputOffset\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 1,\n            \"LABEL\": \"Noise Removal\",\n            \"MAX\": 1,\n            \"MIN\": 0,\n            \"NAME\": \"inputLambda\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"LABEL\": \"Restart\",\n            \"NAME\": \"resetNow\",\n            \"TYPE\": \"event\"\n        }\n    ],\n    \"ISFVSN\": \"2\",\n    \"PASSES\": [\n        {\n            \"PERSISTENT\": true,\n            \"TARGET\": \"maskBuffer\"\n        },\n        {\n            \"PERSISTENT\": true,\n            \"TARGET\": \"delayBuffer\"\n        },\n        {\n        }\n    ]\n}\n*/\n\n#if __VERSION__ <= 120\nvarying vec2 left_coord;\nvarying vec2 right_coord;\nvarying vec2 above_coord;\nvarying vec2 below_coord;\n\nvarying vec2 lefta_coord;\nvarying vec2 righta_coord;\nvarying vec2 leftb_coord;\nvarying vec2 rightb_coord;\n#else\nin vec2 left_coord;\nin vec2 right_coord;\nin vec2 above_coord;\nin vec2 below_coord;\n\nin vec2 lefta_coord;\nin vec2 righta_coord;\nin vec2 leftb_coord;\nin vec2 rightb_coord;\n#endif\n\n\n//\tbased on v002 Optical Flow which is itself a port of Andrew Bensons HS Flow implementation on the GPU.\n//\thttps://github.com/v002/v002-Optical-Flow\n\n\nconst vec4 coeffs = vec4(0.2126, 0.7152, 0.0722, 1.0);\n\nfloat gray(vec4 n)\n{\n\treturn (n.r + n.g + n.b)/3.0;\n}\n\nvoid main()\n{\n\t//\ton the first pass generate the mask using the previous delayBuffer and inputImage\n\t//\ton the 2nd pass update the delayBuffer to hold inputImage\n\t//\ton the 3rd pass output the new mask\n\tif (PASSINDEX == 0)\t{\n\t\tif ((FRAMEINDEX == 0)||(resetNow))\t{\n\t\t\tgl_FragColor = vec4(0.5);\n\t\t}\n\t\telse\t{\n\t\t\t//\tconvert to grayscale\n\t\t\tvec4 a = IMG_THIS_PIXEL(inputImage) * coeffs;\n\t\t\tfloat brightness = gray(a);\n\t\t\ta = vec4(brightness);\n\t\t\tvec4 b = IMG_THIS_PIXEL(delayBuffer) * coeffs;\n\t\t\tbrightness = gray(b);\n\t\t\tb = vec4(brightness);\n\t\t\n\t\t\tvec2 x1 = vec2(inputOffset * RENDERSIZE.x, 0.0);\n\t\t\tvec2 y1 = vec2(0.0,inputOffset * RENDERSIZE.y);\n\t\t\tvec2 texcoord0 = isf_FragNormCoord.xy * RENDERSIZE;\n\t\t\tvec2 texcoord1 = isf_FragNormCoord.xy * RENDERSIZE;\n\t\t\n\t\t\t//get the difference\n\t\t\tvec4 curdif = b-a;\n\t\n\t\t\t//calculate the gradient\n\t\t\tvec4 gradx = IMG_PIXEL(delayBuffer, texcoord1+x1)-IMG_PIXEL(delayBuffer, texcoord1-x1);\n\t\t\tgradx += IMG_PIXEL(inputImage, texcoord0+x1)-IMG_PIXEL(inputImage, texcoord0-x1);\n\t\t\n\t\t\tvec4 grady = IMG_PIXEL(delayBuffer, texcoord1+y1)-IMG_PIXEL(delayBuffer, texcoord1-y1);\n\t\t\tgrady += IMG_PIXEL(inputImage, texcoord0+y1)-IMG_PIXEL(inputImage, texcoord0-y1);\n\t\n\t\t\tvec4 gradmag = sqrt((gradx*gradx)+(grady*grady)+vec4(inputLambda));\n\n\t\t\tvec4 vx = curdif*(gradx/gradmag);\n\t\t\tfloat vxd = gray(vx);//assumes greyscale\n\t\t\t//format output for flowrepos, out(-x,+x,-y,+y)\n\t\t\tvec2 xout = vec2(max(vxd,0.),abs(min(vxd,0.)))*inputScale;\n\n\t\t\tvec4 vy = curdif*(grady/gradmag);\n\t\t\tfloat vyd = gray(vy);//assumes greyscale\n\t\t\t//format output for flowrepos, out(-x,+x,-y,+y)\n\t\t\tvec2 yout = vec2(max(vyd,0.),abs(min(vyd,0.)))*inputScale;\n\t\n\t\t\t//gl_FragColor = clamp(vec4(xout.xy,yout.xy), 0.0, 1.0);\n\t\t\n\t\t\tvec4 mask = clamp(vec4(xout.xy,yout.xy), 0.0, 1.0);\n\t\t\n\t\t\tvec4 color = IMG_THIS_NORM_PIXEL(maskBuffer);\n\t\t\tvec4 colorL = IMG_NORM_PIXEL(maskBuffer, left_coord);\n\t\t\tvec4 colorR = IMG_NORM_PIXEL(maskBuffer, right_coord);\n\t\t\tvec4 colorA = IMG_NORM_PIXEL(maskBuffer, above_coord);\n\t\t\tvec4 colorB = IMG_NORM_PIXEL(maskBuffer, below_coord);\n\n\t\t\tvec4 colorLA = IMG_NORM_PIXEL(maskBuffer, lefta_coord);\n\t\t\tvec4 colorRA = IMG_NORM_PIXEL(maskBuffer, righta_coord);\n\t\t\tvec4 colorLB = IMG_NORM_PIXEL(maskBuffer, leftb_coord);\n\t\t\tvec4 colorRB = IMG_NORM_PIXEL(maskBuffer, rightb_coord);\n\n\t\t\t//\tblur then sharpen the feedback buffer\n\t\t\tvec4 blurVector = (color + colorL + colorR + colorA + colorB + colorLA + colorRA + colorLB + colorRB) / 9.0;\n\t\t\tgl_FragColor = mask + maskHold * blurVector;\n\t\t}\n\t}\n\telse if (PASSINDEX == 1)\t{\t\n\t\t//\there we just buffer the current frame for next TIME\n\t\tgl_FragColor = IMG_THIS_PIXEL(inputImage);\n\t}\n\telse\t{\n\t\t//\tNOW DO SOMETHING WITH THE MASK - BLUR THE IMAGE AND THE MASK IMAGE\n\t\t\n\t\t//\tblur the mask image\n\t\tvec2 texcoord0 = isf_FragNormCoord.xy;\n\t\t\n\t\tvec4 color = IMG_THIS_NORM_PIXEL(maskBuffer);\n\t\tvec4 colorL = IMG_NORM_PIXEL(maskBuffer, left_coord);\n\t\tvec4 colorR = IMG_NORM_PIXEL(maskBuffer, right_coord);\n\t\tvec4 colorA = IMG_NORM_PIXEL(maskBuffer, above_coord);\n\t\tvec4 colorB = IMG_NORM_PIXEL(maskBuffer, below_coord);\n\n\t\tvec4 colorLA = IMG_NORM_PIXEL(maskBuffer, lefta_coord);\n\t\tvec4 colorRA = IMG_NORM_PIXEL(maskBuffer, righta_coord);\n\t\tvec4 colorLB = IMG_NORM_PIXEL(maskBuffer, leftb_coord);\n\t\tvec4 colorRB = IMG_NORM_PIXEL(maskBuffer, rightb_coord);\n\t\t\n\t\tvec4 blurVector = (color + colorL + colorR + colorA + colorB + colorLA + colorRA + colorLB + colorRB) / 9.0;\n\t\t//vec4 blurVector = IMG_THIS_PIXEL(maskBuffer);\n\t\t\n\t\tvec2 blurAmount = vec2(blurVector.y-blurVector.x, blurVector.w-blurVector.z);\n\t\tvec2 tmp = texcoord0 + blurAmount * amt;\n\t\ttmp.x = clamp(tmp.x,0.0,1.0);\n\t\ttmp.y = clamp(tmp.y,0.0,1.0);\n\t\tvec4 sample0 = IMG_NORM_PIXEL(inputImage, tmp);\n\t\ttmp = (1.02 + texcoord0) + blurAmount * amt * amt;\n\t\ttmp.x = clamp(tmp.x,0.0,1.0);\n\t\ttmp.y = clamp(tmp.y,0.0,1.0);\n\t\tvec4 sample1 = IMG_NORM_PIXEL(inputImage, tmp);\n\t\tgl_FragColor = (sample0 * 3.0 + sample1) / 4.0;\n\t}\n}\n","Inlets":[{"uuid":"5ac86198-2d03-4830-9e41-a6d529922d29","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"inputImage","Exposed":"inputimage","Format":0,"Filter":2,"AddressMode":1},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"amt","Exposed":"amt","Value":{"Float":1.0},"Init":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"maskHold","Exposed":"maskhold","Value":{"Float":1.0},"Init":{"Float":0.9800000190734863},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":3,"Hidden":true,"Custom":"inputScale","Exposed":"inputscale","Value":{"Float":9.608358383178711},"Init":{"Float":2.0},"Domain":{"Float":{"Min":0.0,"Max":10.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":4,"Hidden":true,"Custom":"inputOffset","Exposed":"inputoffset","Value":{"Float":0.3108358085155487},"Init":{"Float":0.10000000149011612},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":5,"Hidden":true,"Custom":"inputLambda","Exposed":"inputlambda","Value":{"Float":0.42750245332717896},"Init":{"Float":1.0},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"feb87e84-e0d2-428f-96ff-a123ac964f59","ObjectName":"Inlet","id":6,"Hidden":true,"Custom":"resetNow","Exposed":"resetnow","Value":{"Bool":false},"Init":{"Bool":false},"Domain":{"Bool":null}}],"Outlets":[{"uuid":"f1c71046-b754-49a5-8e66-d01374773dfc","ObjectName":"Outlet","id":1,"Hidden":false,"Custom":"Texture Out","Exposed":"texture out","Address":"Window:/"}]},{"uuid":"971739ae-14a3-4283-b0a0-96dbd367ce66","ObjectName":"avnd_expsmooth","id":13,"Metadata":{"ScriptingName":"Exp Smoothing","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-795.2367272460938,137.14743252246097],"Size":[117.3125,22.0],"Loops":false,"Inlets":[{"uuid":"769dd38a-bfb3-4dc6-b52a-b6abb7afe2a3","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"Input","Exposed":"input"},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"Alpha","Exposed":"alpha","Value":{"Float":0.16575010120868683},"Init":{"Float":0.5},"Domain":{"Float":{"Min":0.00009999999747378752,"Max":1.0}}}],"Outlets":[{"uuid":"cff96158-cc72-46d7-99dc-b6038171375b","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"Output","Exposed":"output"}]},{"uuid":"a14c8ced-25e6-4c89-ac45-63750cbb87fd","ObjectName":"Peak","id":12,"Metadata":{"ScriptingName":"Peak","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-949.2367272460938,135.14743252246097],"Size":[75.0,22.0],"Loops":false,"Inlets":[{"uuid":"a1574bb0-cbd4-4c7d-9417-0c25cfd1187b","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"in","Exposed":"in"},{"uuid":"5554eb67-bcc8-45ab-8ec2-37a3f191aa64","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"Gain","Exposed":"gain","Value":{"Float":1.5468111038208008},"Init":{"Float":1.0},"Domain":{"Float":{"Min":0.0,"Max":100.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"Gate","Exposed":"gate","Value":{"Float":0.5323333144187927},"Init":{"Float":0.0},"Domain":{"Float":{"Min":0.0,"Max":1.0}}}],"Outlets":[{"uuid":"cff96158-cc72-46d7-99dc-b6038171375b","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"out","Exposed":"out"}]},{"uuid":"63174570-d608-44bf-a9cb-e6f5a11f73cc","ObjectName":"Sound","id":11,"Metadata":{"ScriptingName":"88bpm_Freq3b Gate","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":5644800000,"Pos":[-636.2367272460938,115.14743252246097],"Size":[200.0,100.0],"Loops":true,"File":"<LIBRARY>:packages/olpc-sound-samples-v2/MikeDiMattia44/88bpm_Freq3b Gate.wav","Outlet":{"uuid":"a1d97535-18ac-444a-8417-0cbc1692d897","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"Audio Out","Exposed":"audio out","GainInlet":{"uuid":"9a13fb32-269a-47bf-99a9-930188c1f19c","ObjectName":"Inlet","id":10000,"Hidden":false,"Custom":"Gain","Exposed":"gain","Value":{},"Init":{},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},"PanInlet":{"uuid":"9a13fb32-269a-47bf-99a9-930188c1f19c","ObjectName":"Inlet","id":10001,"Hidden":false,"Custom":"Pan","Exposed":"pan","Value":{},"Init":{},"Domain":{}},"Gain":1.0,"Pan":[1.0,1.0],"Propagate":true},"Upmix":2,"Start":0,"Mode":2,"Tempo":88.0,"Stream":-1},{"uuid":"d757bd0d-c0a1-4aec-bf72-945b722ab85b","ObjectName":"MathGenerator","id":10,"Metadata":{"ScriptingName":"Random XYZ","Comment":"","Color":"Transparent1","Label":"Random Color","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-955.8455664062499,-167.53475892578126],"Size":[225.0,180.0],"Loops":false,"Inlets":[{"uuid":"9ae797ea-d94c-4792-acec-9ec1932bae5d","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"Expression (ExprTK)","Exposed":"expression (exprtk)","Value":{"String":"return [\n1000( noise(10 pos * a, 0.5, 0.1) - 0.5),\n1000( noise(100000 + 10 pos * b, 0.8, 0.1) - 0.5), \n1000( noise(10 pos * c, 4.1, 10.1) - 0.5)\n]"},"Init":{"String":"cos(t) + log(pos * (1+a) / (1+abs(dt)))"},"Domain":{}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"Param (a)","Exposed":"param (a)","Value":{"Float":1.0},"Init":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"Param (b)","Exposed":"param (b)","Value":{"Float":0.8768140077590942},"Init":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":3,"Hidden":true,"Custom":"Param (c)","Exposed":"param (c)","Value":{"Float":0.643480658531189},"Init":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":1.0}}}],"Outlets":[{"uuid":"cff96158-cc72-46d7-99dc-b6038171375b","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"out","Exposed":"out"}]},{"uuid":"74ca45ff-92c9-44a0-8f1a-754dea05ee1b","ObjectName":"gfxProcess","id":7,"Metadata":{"ScriptingName":"Bloom.1","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-431.80234375,-226.50992187499995],"Size":[75.0,22.0],"Loops":false,"Vertex":"#if __VERSION__ <= 120\nvarying vec2\t\ttexOffsets[5];\n#else\nout vec2\t\ttexOffsets[5];\n#endif\n\nvoid main(void)\t{\n\t//\tload the main shader stuff\n\tisf_vertShaderInit();\n\t\n\t\n\tint\t\t\tblurLevel = int(floor(blurAmount/6.0));\n\tfloat\t\tblurLevelModulus = mod(blurAmount, 6.0);\n\tfloat\t\tblurRadius = 0.0;\n\tfloat\t\tblurRadiusInPixels = 0.0;\n\t//\tfirst three passes are just drawing the texture- do nothing\n\t\n\t//\tthe next four passes do gaussion blurs on the various levels\n\tif (PASSINDEX==3 || PASSINDEX==5)\t{\n\t\tfloat\t\tpixelWidth = 1.0/RENDERSIZE.x;\n\t\t//\tpass 3 is sampling 1/12, but writing to 1/4\n\t\tif (PASSINDEX==3)\t{\n\t\t\tif (blurLevel==1)\n\t\t\t\tblurRadius = blurLevelModulus/1.5;\n\t\t\telse if (blurLevel>1)\n\t\t\t\tblurRadius = 4.0;\n\t\t}\n\t\t//\tpass 5 is sampling 1/4 and writing to full-size\n\t\telse if (PASSINDEX==5)\t{\n\t\t\tif (blurLevel==0)\n\t\t\t\tblurRadius = blurLevelModulus;\n\t\t\telse if (blurLevel>0)\n\t\t\t\tblurRadius = 6.0;\n\t\t}\n\t\tblurRadiusInPixels = pixelWidth * blurRadius;\n\t\ttexOffsets[0] = isf_FragNormCoord;\n\t\ttexOffsets[1] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]-blurRadiusInPixels, isf_FragNormCoord[1]),0.0,1.0);\n\t\ttexOffsets[2] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]+blurRadiusInPixels, isf_FragNormCoord[1]),0.0,1.0);\n\t\tif (PASSINDEX==3)\t{\n\t\t\ttexOffsets[3] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]-(2.0*blurRadiusInPixels), isf_FragNormCoord[1]),0.0,1.0);\n\t\t\ttexOffsets[4] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]+(2.0*blurRadiusInPixels), isf_FragNormCoord[1]),0.0,1.0);\n\t\t}\n\t}\n\telse if (PASSINDEX==4 || PASSINDEX==6)\t{\n\t\tfloat\t\tpixelHeight = 1.0/RENDERSIZE.y;\n\t\t//\tpass 4 is sampling 1/12, but writing to 1/4\n\t\tif (PASSINDEX==4)\t{\n\t\t\tif (blurLevel==1)\n\t\t\t\tblurRadius = blurLevelModulus/1.5;\n\t\t\telse if (blurLevel>1)\n\t\t\t\tblurRadius = 4.0;\n\t\t}\n\t\t//\tpass 6 is sampling 1/4 and writing to full-size\n\t\telse if (PASSINDEX==6)\t{\n\t\t\tif (blurLevel==0)\n\t\t\t\tblurRadius = blurLevelModulus;\n\t\t\telse if (blurLevel>0)\n\t\t\t\tblurRadius = 6.0;\n\t\t}\n\t\tblurRadiusInPixels = pixelHeight * blurRadius;\n\t\ttexOffsets[0] = isf_FragNormCoord;\n\t\ttexOffsets[1] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]-blurRadiusInPixels),0.0,1.0);\n\t\ttexOffsets[2] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]+blurRadiusInPixels),0.0,1.0);\n\t\tif (PASSINDEX==4)\t{\n\t\t\ttexOffsets[3] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]-(2.0*blurRadiusInPixels)),0.0,1.0);\n\t\t\ttexOffsets[4] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]+(2.0*blurRadiusInPixels)),0.0,1.0);\n\t\t}\n\t}\n\t\n}\n","Fragment":"/*{\n    \"CATEGORIES\": [\n        \"Blur\",\n        \"Film\"\n    ],\n    \"CREDIT\": \"by VIDVOX\",\n    \"INPUTS\": [\n        {\n            \"NAME\": \"inputImage\",\n            \"TYPE\": \"image\"\n        },\n        {\n            \"DEFAULT\": 12,\n            \"MAX\": 12,\n            \"MIN\": 0,\n            \"NAME\": \"blurAmount\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 0,\n            \"MAX\": 1,\n            \"MIN\": 0,\n            \"NAME\": \"intensity\",\n            \"TYPE\": \"float\"\n        }\n    ],\n    \"ISFVSN\": \"2\",\n    \"PASSES\": [\n        {\n            \"DESCRIPTION\": \"Pass 0\",\n            \"HEIGHT\": \"floor($HEIGHT/2.0)\",\n            \"TARGET\": \"halfSizeBaseRender\",\n            \"WIDTH\": \"floor($WIDTH/2.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 1\",\n            \"HEIGHT\": \"floor($HEIGHT/4.0)\",\n            \"TARGET\": \"quarterSizeBaseRender\",\n            \"WIDTH\": \"floor($WIDTH/4.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 2\",\n            \"HEIGHT\": \"floor($HEIGHT/8.0)\",\n            \"TARGET\": \"eighthSizeBaseRender\",\n            \"WIDTH\": \"floor($WIDTH/8.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 3\",\n            \"HEIGHT\": \"floor($HEIGHT/4.0)\",\n            \"TARGET\": \"quarterGaussA\",\n            \"WIDTH\": \"floor($WIDTH/4.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 4\",\n            \"HEIGHT\": \"floor($HEIGHT/4.0)\",\n            \"TARGET\": \"quarterGaussB\",\n            \"WIDTH\": \"floor($WIDTH/4.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 5\",\n            \"TARGET\": \"fullGaussA\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 6\",\n            \"TARGET\": \"fullGaussB\"\n        }\n    ]\n}\n*/\n\n#if __VERSION__ <= 120\nvarying vec2\t\ttexOffsets[5];\n#else\nin vec2\t\ttexOffsets[5];\n#endif\n\n\nvoid main() {\n\tint\t\t\tblurLevel = int(floor(blurAmount/6.0));\n\tfloat\t\tblurLevelModulus = mod(blurAmount, 6.0);\n\t//\tfirst three passes are just copying the input image into the buffer at varying sizes\n\tif (PASSINDEX==0)\t{\n\t\tgl_FragColor = IMG_NORM_PIXEL(inputImage, isf_FragNormCoord);\n\t}\n\telse if (PASSINDEX==1)\t{\n\t\tgl_FragColor = IMG_NORM_PIXEL(halfSizeBaseRender, isf_FragNormCoord);\n\t}\n\telse if (PASSINDEX==2)\t{\n\t\tgl_FragColor = IMG_NORM_PIXEL(quarterSizeBaseRender, isf_FragNormCoord);\n\t}\n\t//\tstart reading from the previous stage- each two passes completes a gaussian blur, then \n\t//\twe increase the resolution & blur (the lower-res blurred image from the previous pass) again...\n\telse if (PASSINDEX == 3)\t{\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[2]);\n\t\tvec4\t\tsample3 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[3]);\n\t\tvec4\t\tsample4 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[4]);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgb / (5.0), 1.0);\n\t\tgl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgba / (5.0));\n\t}\n\telse if (PASSINDEX == 4)\t{\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[2]);\n\t\tvec4\t\tsample3 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[3]);\n\t\tvec4\t\tsample4 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[4]);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgb / (5.0), 1.0);\n\t\tgl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgba / (5.0));\n\t}\n\t//\t...writes into the full-size\n\telse if (PASSINDEX == 5)\t{\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(quarterGaussB,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(quarterGaussB,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(quarterGaussB,texOffsets[2]);\n\t\t//gl_FragColor =  vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\tgl_FragColor =  vec4((sample0 + sample1 + sample2).rgba / (3.0));\n\t}\n\telse if (PASSINDEX == 6)\t{\n\t\t//\tthis is the last pass- calculate the blurred image as i have in previous passes, then mix it in with the full-size input image using the blur amount so i get a smooth transition into the blur at low blur levels\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(fullGaussA,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(fullGaussA,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(fullGaussA,texOffsets[2]);\n\t\t//vec4\t\tblurredImg =  vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\tvec4\t\tblurredImg =  vec4((sample0 + sample1 + sample2).rgba / (4.0));\n\t\tvec4\t\toriginalImg = IMG_NORM_PIXEL(inputImage,isf_FragNormCoord);\n\t\tif (blurLevel == 0)\n\t\t\tblurredImg = mix(originalImg, blurredImg, (blurLevelModulus/6.0));\n\t\t\n\t\tgl_FragColor = max(mix(originalImg,blurredImg*1.2,intensity), originalImg);\n\t}\n}","Inlets":[{"uuid":"5ac86198-2d03-4830-9e41-a6d529922d29","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"inputImage","Exposed":"inputimage","Format":8,"Filter":2,"AddressMode":1},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"blurAmount","Exposed":"bluramount","Value":{"Float":12.0},"Init":{"Float":12.0},"Domain":{"Float":{"Min":0.0,"Max":12.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"intensity","Exposed":"intensity","Value":{"Float":1.0},"Init":{"Float":0.0},"Domain":{"Float":{"Min":0.0,"Max":1.0}}}],"Outlets":[{"uuid":"f1c71046-b754-49a5-8e66-d01374773dfc","ObjectName":"Outlet","id":1,"Hidden":false,"Custom":"Texture Out","Exposed":"texture out"}]},{"uuid":"74ca45ff-92c9-44a0-8f1a-754dea05ee1b","ObjectName":"gfxProcess","id":6,"Metadata":{"ScriptingName":"Bloom","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-53.94687499999998,-226.89],"Size":[75.0,22.0],"Loops":false,"Vertex":"#if __VERSION__ <= 120\nvarying vec2\t\ttexOffsets[5];\n#else\nout vec2\t\ttexOffsets[5];\n#endif\n\nvoid main(void)\t{\n\t//\tload the main shader stuff\n\tisf_vertShaderInit();\n\t\n\t\n\tint\t\t\tblurLevel = int(floor(blurAmount/6.0));\n\tfloat\t\tblurLevelModulus = mod(blurAmount, 6.0);\n\tfloat\t\tblurRadius = 0.0;\n\tfloat\t\tblurRadiusInPixels = 0.0;\n\t//\tfirst three passes are just drawing the texture- do nothing\n\t\n\t//\tthe next four passes do gaussion blurs on the various levels\n\tif (PASSINDEX==3 || PASSINDEX==5)\t{\n\t\tfloat\t\tpixelWidth = 1.0/RENDERSIZE.x;\n\t\t//\tpass 3 is sampling 1/12, but writing to 1/4\n\t\tif (PASSINDEX==3)\t{\n\t\t\tif (blurLevel==1)\n\t\t\t\tblurRadius = blurLevelModulus/1.5;\n\t\t\telse if (blurLevel>1)\n\t\t\t\tblurRadius = 4.0;\n\t\t}\n\t\t//\tpass 5 is sampling 1/4 and writing to full-size\n\t\telse if (PASSINDEX==5)\t{\n\t\t\tif (blurLevel==0)\n\t\t\t\tblurRadius = blurLevelModulus;\n\t\t\telse if (blurLevel>0)\n\t\t\t\tblurRadius = 6.0;\n\t\t}\n\t\tblurRadiusInPixels = pixelWidth * blurRadius;\n\t\ttexOffsets[0] = isf_FragNormCoord;\n\t\ttexOffsets[1] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]-blurRadiusInPixels, isf_FragNormCoord[1]),0.0,1.0);\n\t\ttexOffsets[2] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]+blurRadiusInPixels, isf_FragNormCoord[1]),0.0,1.0);\n\t\tif (PASSINDEX==3)\t{\n\t\t\ttexOffsets[3] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]-(2.0*blurRadiusInPixels), isf_FragNormCoord[1]),0.0,1.0);\n\t\t\ttexOffsets[4] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0]+(2.0*blurRadiusInPixels), isf_FragNormCoord[1]),0.0,1.0);\n\t\t}\n\t}\n\telse if (PASSINDEX==4 || PASSINDEX==6)\t{\n\t\tfloat\t\tpixelHeight = 1.0/RENDERSIZE.y;\n\t\t//\tpass 4 is sampling 1/12, but writing to 1/4\n\t\tif (PASSINDEX==4)\t{\n\t\t\tif (blurLevel==1)\n\t\t\t\tblurRadius = blurLevelModulus/1.5;\n\t\t\telse if (blurLevel>1)\n\t\t\t\tblurRadius = 4.0;\n\t\t}\n\t\t//\tpass 6 is sampling 1/4 and writing to full-size\n\t\telse if (PASSINDEX==6)\t{\n\t\t\tif (blurLevel==0)\n\t\t\t\tblurRadius = blurLevelModulus;\n\t\t\telse if (blurLevel>0)\n\t\t\t\tblurRadius = 6.0;\n\t\t}\n\t\tblurRadiusInPixels = pixelHeight * blurRadius;\n\t\ttexOffsets[0] = isf_FragNormCoord;\n\t\ttexOffsets[1] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]-blurRadiusInPixels),0.0,1.0);\n\t\ttexOffsets[2] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]+blurRadiusInPixels),0.0,1.0);\n\t\tif (PASSINDEX==4)\t{\n\t\t\ttexOffsets[3] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]-(2.0*blurRadiusInPixels)),0.0,1.0);\n\t\t\ttexOffsets[4] = (blurRadius==0.0) ? isf_FragNormCoord : clamp(vec2(isf_FragNormCoord[0], isf_FragNormCoord[1]+(2.0*blurRadiusInPixels)),0.0,1.0);\n\t\t}\n\t}\n\t\n}\n","Fragment":"/*{\n    \"CATEGORIES\": [\n        \"Blur\",\n        \"Film\"\n    ],\n    \"CREDIT\": \"by VIDVOX\",\n    \"INPUTS\": [\n        {\n            \"NAME\": \"inputImage\",\n            \"TYPE\": \"image\"\n        },\n        {\n            \"DEFAULT\": 12,\n            \"MAX\": 12,\n            \"MIN\": 0,\n            \"NAME\": \"blurAmount\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 0,\n            \"MAX\": 1,\n            \"MIN\": 0,\n            \"NAME\": \"intensity\",\n            \"TYPE\": \"float\"\n        }\n    ],\n    \"ISFVSN\": \"2\",\n    \"PASSES\": [\n        {\n            \"DESCRIPTION\": \"Pass 0\",\n            \"HEIGHT\": \"floor($HEIGHT/2.0)\",\n            \"TARGET\": \"halfSizeBaseRender\",\n            \"WIDTH\": \"floor($WIDTH/2.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 1\",\n            \"HEIGHT\": \"floor($HEIGHT/4.0)\",\n            \"TARGET\": \"quarterSizeBaseRender\",\n            \"WIDTH\": \"floor($WIDTH/4.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 2\",\n            \"HEIGHT\": \"floor($HEIGHT/8.0)\",\n            \"TARGET\": \"eighthSizeBaseRender\",\n            \"WIDTH\": \"floor($WIDTH/8.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 3\",\n            \"HEIGHT\": \"floor($HEIGHT/4.0)\",\n            \"TARGET\": \"quarterGaussA\",\n            \"WIDTH\": \"floor($WIDTH/4.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 4\",\n            \"HEIGHT\": \"floor($HEIGHT/4.0)\",\n            \"TARGET\": \"quarterGaussB\",\n            \"WIDTH\": \"floor($WIDTH/4.0)\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 5\",\n            \"TARGET\": \"fullGaussA\"\n        },\n        {\n            \"DESCRIPTION\": \"Pass 6\",\n            \"TARGET\": \"fullGaussB\"\n        }\n    ]\n}\n*/\n\n#if __VERSION__ <= 120\nvarying vec2\t\ttexOffsets[5];\n#else\nin vec2\t\ttexOffsets[5];\n#endif\n\n\nvoid main() {\n\tint\t\t\tblurLevel = int(floor(blurAmount/6.0));\n\tfloat\t\tblurLevelModulus = mod(blurAmount, 6.0);\n\t//\tfirst three passes are just copying the input image into the buffer at varying sizes\n\tif (PASSINDEX==0)\t{\n\t\tgl_FragColor = IMG_NORM_PIXEL(inputImage, isf_FragNormCoord);\n\t}\n\telse if (PASSINDEX==1)\t{\n\t\tgl_FragColor = IMG_NORM_PIXEL(halfSizeBaseRender, isf_FragNormCoord);\n\t}\n\telse if (PASSINDEX==2)\t{\n\t\tgl_FragColor = IMG_NORM_PIXEL(quarterSizeBaseRender, isf_FragNormCoord);\n\t}\n\t//\tstart reading from the previous stage- each two passes completes a gaussian blur, then \n\t//\twe increase the resolution & blur (the lower-res blurred image from the previous pass) again...\n\telse if (PASSINDEX == 3)\t{\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[2]);\n\t\tvec4\t\tsample3 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[3]);\n\t\tvec4\t\tsample4 = IMG_NORM_PIXEL(eighthSizeBaseRender,texOffsets[4]);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgb / (5.0), 1.0);\n\t\tgl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgba / (5.0));\n\t}\n\telse if (PASSINDEX == 4)\t{\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[2]);\n\t\tvec4\t\tsample3 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[3]);\n\t\tvec4\t\tsample4 = IMG_NORM_PIXEL(quarterGaussA,texOffsets[4]);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\t//gl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgb / (5.0), 1.0);\n\t\tgl_FragColor = vec4((sample0 + sample1 + sample2 + sample3 + sample4).rgba / (5.0));\n\t}\n\t//\t...writes into the full-size\n\telse if (PASSINDEX == 5)\t{\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(quarterGaussB,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(quarterGaussB,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(quarterGaussB,texOffsets[2]);\n\t\t//gl_FragColor =  vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\tgl_FragColor =  vec4((sample0 + sample1 + sample2).rgba / (3.0));\n\t}\n\telse if (PASSINDEX == 6)\t{\n\t\t//\tthis is the last pass- calculate the blurred image as i have in previous passes, then mix it in with the full-size input image using the blur amount so i get a smooth transition into the blur at low blur levels\n\t\tvec4\t\tsample0 = IMG_NORM_PIXEL(fullGaussA,texOffsets[0]);\n\t\tvec4\t\tsample1 = IMG_NORM_PIXEL(fullGaussA,texOffsets[1]);\n\t\tvec4\t\tsample2 = IMG_NORM_PIXEL(fullGaussA,texOffsets[2]);\n\t\t//vec4\t\tblurredImg =  vec4((sample0 + sample1 + sample2).rgb / (3.0), 1.0);\n\t\tvec4\t\tblurredImg =  vec4((sample0 + sample1 + sample2).rgba / (4.0));\n\t\tvec4\t\toriginalImg = IMG_NORM_PIXEL(inputImage,isf_FragNormCoord);\n\t\tif (blurLevel == 0)\n\t\t\tblurredImg = mix(originalImg, blurredImg, (blurLevelModulus/6.0));\n\t\t\n\t\tgl_FragColor = max(mix(originalImg,blurredImg*1.2,intensity), originalImg);\n\t}\n}","Inlets":[{"uuid":"5ac86198-2d03-4830-9e41-a6d529922d29","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"inputImage","Exposed":"inputimage","Format":8,"Filter":2,"AddressMode":1},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"blurAmount","Exposed":"bluramount","Value":{"Float":12.0},"Init":{"Float":12.0},"Domain":{"Float":{"Min":0.0,"Max":12.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"intensity","Exposed":"intensity","Value":{"Float":1.0},"Init":{"Float":0.0},"Domain":{"Float":{"Min":0.0,"Max":1.0}}}],"Outlets":[{"uuid":"f1c71046-b754-49a5-8e66-d01374773dfc","ObjectName":"Outlet","id":1,"Hidden":false,"Custom":"Texture Out","Exposed":"texture out"}]},{"uuid":"846a5de5-47f9-46c5-a898-013cb20951d0","ObjectName":"Javascript","id":4,"Metadata":{"ScriptingName":"gltf","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-696.31796875,-225.50992187499997],"Size":[75.0,22.0],"Loops":false,"Script":"import Score as Score\nimport QtQuick\nimport QtQuick3D\nimport QtQuick3D.Helpers\nimport QtQuick3D.AssetUtils\n\nScore.Script {\n  Score.FileChooser {\n    objectName: \"glTF file\"\n    id: model_url\n  }\n  Score.FileChooser {\n    objectName: \"Environment map\"\n    id: env_url\n  }\n  Score.XYZSpinBoxes {\n    id: lightPosition\n    objectName: \"Light Position\"\n    min: Qt.vector3d(-1000.0, -1000.0, -1000.0)\n    max: Qt.vector3d(1000.0, 1000.0, 1000.0)\n  }\n  Score.HSVSlider {\n    id: lightColor\n    objectName: \"Light Color\"\n  }\n\n  Score.TextureOutlet {\n    objectName: \"out\"\n    item:\n\n    View3D {\n      anchors.fill: parent\n\n      environment: SceneEnvironment {\n        clearColor: \"black\"\n\n        antialiasingMode: SceneEnvironment.MSAA\n        antialiasingQuality: SceneEnvironment.VeryHigh\n        backgroundMode: SceneEnvironment.SkyBox\n        lightProbe: Texture {\n          source: env_url.value;\n        }\n      }\n\n      PerspectiveCamera {\n        id: camera\n        y: 5\n        clipNear: 0.01\n        clipFar: 1000\n      }\n\n      PointLight {\n          id: pointLight\n          x: lightPosition.value.x\n          y: lightPosition.value.y\n          z: lightPosition.value.z\n          color: lightColor.value\n          brightness: 25\n          castsShadow: true\n          shadowMapQuality: Light.ShadowMapQualityUltra\n          shadowFactor: 100\n      }\n\n      DirectionalLight {\n        castsShadow: true\n      }\n\n      RuntimeLoader {\n        id: importNode\n        scale: Qt.vector3d(100, 100, 100)\n        source: model_url.value;\n      }\n\n      WasdController {\n          id: wasd\n        controlledObject: camera\n      }\n    }\n  }\n\n  tick: function(token, state) {      \n      wasd.forceActiveFocus();\n  }\n}","Inlets":[{"uuid":"40833147-4c42-4b8b-bb80-0b1d15dae129","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"glTF file","Exposed":"gltf file","Value":{"String":"/home/jcelerier/Documents/ossia/score/packages/glTF-Sample-Assets/Models/ABeautifulGame/glTF-Binary/ABeautifulGame.glb"},"Init":{},"Domain":{},"Filters":""},{"uuid":"40833147-4c42-4b8b-bb80-0b1d15dae129","ObjectName":"Inlet","id":1,"Hidden":false,"Custom":"Environment map","Exposed":"environment map","Value":{"String":"/home/jcelerier/Downloads/resting_place_4k.exr"},"Init":{},"Domain":{},"Filters":""},{"uuid":"377e8205-b442-4d54-8832-3761def522b2","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"Light Position","Exposed":"light position","Value":{"Vec3f":[0.0,0.0,0.0763888880610466]},"Init":{"Vec3f":[0.0,0.0,0.0]},"Domain":{"Vec3f":{"Min":[-1000.0,-1000.0,-1000.0],"Max":[1000.0,1000.0,1000.0],"Values":[[],[],[]]}}},{"uuid":"8f38638e-9f9f-48b0-ae36-1cba86ef5703","ObjectName":"Inlet","id":3,"Hidden":true,"Custom":"Light Color","Exposed":"light color","Value":{"Vec4f":[0.4569466710090637,0.42165255546569824,0.4781414568424225,1.0]},"Init":{"Vec4f":[0.0,0.0,0.0,1.0]},"Domain":{}}],"Outlets":[{"uuid":"f1c71046-b754-49a5-8e66-d01374773dfc","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"out","Exposed":"out"}]},{"uuid":"74ca45ff-92c9-44a0-8f1a-754dea05ee1b","ObjectName":"gfxProcess","id":3,"Metadata":{"ScriptingName":"Color Blowout","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-241.259375,-227.89],"Size":[94.640625,22.0],"Loops":false,"Vertex":"#if __VERSION__ <= 120\nvarying vec2 left_coord;\nvarying vec2 right_coord;\nvarying vec2 above_coord;\nvarying vec2 below_coord;\n\nvarying vec2 lefta_coord;\nvarying vec2 righta_coord;\nvarying vec2 leftb_coord;\nvarying vec2 rightb_coord;\n#else\nout vec2 left_coord;\nout vec2 right_coord;\nout vec2 above_coord;\nout vec2 below_coord;\n\nout vec2 lefta_coord;\nout vec2 righta_coord;\nout vec2 leftb_coord;\nout vec2 rightb_coord;\n#endif\n\n\nvoid main()\n{\n\tisf_vertShaderInit();\n\tvec2 texc = vec2(isf_FragNormCoord[0],isf_FragNormCoord[1]);\n\tvec2 d = 1.0/RENDERSIZE;\n\n\tleft_coord = clamp(vec2(texc.xy + vec2(-d.x , 0)),0.0,1.0);\n\tright_coord = clamp(vec2(texc.xy + vec2(d.x , 0)),0.0,1.0);\n\tabove_coord = clamp(vec2(texc.xy + vec2(0,d.y)),0.0,1.0);\n\tbelow_coord = clamp(vec2(texc.xy + vec2(0,-d.y)),0.0,1.0);\n\n\tlefta_coord = clamp(vec2(texc.xy + vec2(-d.x , d.x)),0.0,1.0);\n\trighta_coord = clamp(vec2(texc.xy + vec2(d.x , d.x)),0.0,1.0);\n\tleftb_coord = clamp(vec2(texc.xy + vec2(-d.x , -d.x)),0.0,1.0);\n\trightb_coord = clamp(vec2(texc.xy + vec2(d.x , -d.x)),0.0,1.0);\n}","Fragment":"/*\n{\n  \"CATEGORIES\" : [\n    \"Stylize\", \"Color Effect\"\n  ],\n  \"ISFVSN\" : \"2\",\n  \"INPUTS\" : [\n    {\n      \"NAME\" : \"inputImage\",\n      \"TYPE\" : \"image\"\n    },\n    {\n      \"NAME\" : \"intensity\",\n      \"TYPE\" : \"float\",\n      \"MAX\" : 1,\n      \"DEFAULT\" : 0,\n      \"MIN\" : -1\n    }\n  ],\n  \"PASSES\" : [\n    {\n      \"TARGET\" : \"pass1\"\n    },\n    {\n      \"TARGET\" : \"pass2\"\n    },\n    {\n      \"TARGET\" : \"pass3\"\n    }\n  ],\n  \"CREDIT\" : \"by VIDVOX\"\n}\n*/\n\n#if __VERSION__ <= 120\nvarying vec2 left_coord;\nvarying vec2 right_coord;\nvarying vec2 above_coord;\nvarying vec2 below_coord;\n\nvarying vec2 lefta_coord;\nvarying vec2 righta_coord;\nvarying vec2 leftb_coord;\nvarying vec2 rightb_coord;\n#else\nin vec2 left_coord;\nin vec2 right_coord;\nin vec2 above_coord;\nin vec2 below_coord;\n\nin vec2 lefta_coord;\nin vec2 righta_coord;\nin vec2 leftb_coord;\nin vec2 rightb_coord;\n#endif\n\nfloat gray(vec4 n)\n{\n\treturn (n.r + n.g + n.b)/3.0;\n}\n\nvoid main()\n{\n\tvec4 final = vec4(0.0);\n\n\tif (PASSINDEX == 0)\t{\n\t\tvec4 color = IMG_THIS_PIXEL(inputImage);\n\t\tvec4 colorL = (IMG_NORM_PIXEL(inputImage, left_coord));\n\t\tvec4 colorR = (IMG_NORM_PIXEL(inputImage, right_coord));\n\t\tvec4 colorA = (IMG_NORM_PIXEL(inputImage, above_coord));\n\t\tvec4 colorB = (IMG_NORM_PIXEL(inputImage, below_coord));\n\n\t\tvec4 colorLA = (IMG_NORM_PIXEL(inputImage, lefta_coord));\n\t\tvec4 colorRA = (IMG_NORM_PIXEL(inputImage, righta_coord));\n\t\tvec4 colorLB = (IMG_NORM_PIXEL(inputImage, leftb_coord));\n\t\tvec4 colorRB = (IMG_NORM_PIXEL(inputImage, rightb_coord));\n\n\t\tfinal = color - color * intensity * (8.0*gray(color) - colorL - colorR - colorA - colorB - colorLA - colorRA - colorLB - colorRB);\n\t\tfinal.a = color.a;\n\t}\n\telse if (PASSINDEX == 1)\t{\n\t\tvec4 color = IMG_THIS_PIXEL(pass1);\n\t\tvec4 colorL = (IMG_NORM_PIXEL(pass1, left_coord));\n\t\tvec4 colorR = (IMG_NORM_PIXEL(pass1, right_coord));\n\t\tvec4 colorA = (IMG_NORM_PIXEL(pass1, above_coord));\n\t\tvec4 colorB = (IMG_NORM_PIXEL(pass1, below_coord));\n\n\t\tvec4 colorLA = (IMG_NORM_PIXEL(pass1, lefta_coord));\n\t\tvec4 colorRA = (IMG_NORM_PIXEL(pass1, righta_coord));\n\t\tvec4 colorLB = (IMG_NORM_PIXEL(pass1, leftb_coord));\n\t\tvec4 colorRB = (IMG_NORM_PIXEL(pass1, rightb_coord));\n\n\t\tfinal = (1.0 - abs(intensity)) * color + abs(intensity) * (colorL + colorR + colorA + colorB + colorLA + colorRA + colorLB + colorRB) / 8.0;\n\t\tfinal.a = color.a;\n\t}\n\telse if (PASSINDEX == 2)\t{\n\t\tvec4 color = IMG_THIS_PIXEL(pass2);\n\t\tvec4 colorL = (IMG_NORM_PIXEL(pass2, left_coord));\n\t\tvec4 colorR = (IMG_NORM_PIXEL(pass2, right_coord));\n\t\tvec4 colorA = (IMG_NORM_PIXEL(pass2, above_coord));\n\t\tvec4 colorB = (IMG_NORM_PIXEL(pass2, below_coord));\n\n\t\tvec4 colorLA = (IMG_NORM_PIXEL(pass2, lefta_coord));\n\t\tvec4 colorRA = (IMG_NORM_PIXEL(pass2, righta_coord));\n\t\tvec4 colorLB = (IMG_NORM_PIXEL(pass2, leftb_coord));\n\t\tvec4 colorRB = (IMG_NORM_PIXEL(pass2, rightb_coord));\n\n\t\tfinal = color - color * intensity * (8.0*gray(color) - colorL - colorR - colorA - colorB - colorLA - colorRA - colorLB - colorRB);\n\t\tfinal.a = color.a;\n\t}\n\n\n\n\tgl_FragColor = final;\n}\n\n","Inlets":[{"uuid":"5ac86198-2d03-4830-9e41-a6d529922d29","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"inputImage","Exposed":"inputimage","Format":8,"Filter":2,"AddressMode":1},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"intensity","Exposed":"intensity","Value":{"Float":-1.0},"Init":{"Float":0.0},"Domain":{"Float":{"Min":-1.0,"Max":1.0}}}],"Outlets":[{"uuid":"f1c71046-b754-49a5-8e66-d01374773dfc","ObjectName":"Outlet","id":1,"Hidden":false,"Custom":"Texture Out","Exposed":"texture out"}]}],"SmallViewRack":[{"Processes":[3,4,6,7,10,12,13,15,16,17,18,19,20,21],"Process":null,"Height":200.0,"Nodal":true},{"Processes":[11],"Process":11,"Height":200.0,"Nodal":false}],"FullViewRack":[{"Process":0,"Nodal":true},{"Process":11,"Nodal":false}],"DefaultDuration":10584000000,"MinDuration":10584000000,"MaxDuration":11113200000,"GuiDuration":19150603787,"Speed":0.641,"Rigidity":false,"MinNull":false,"MaxInf":true,"Signatures":[[0,[4,4]]],"StartState":0,"EndState":1,"StartDate":0,"HeightPercentage":0.0,"NodalSlotHeight":778.0,"QuantizationRate":-1.0,"Zoom":7560443.6587552745,"Center":7163520366,"NodalOffset":[-639.0,14.0],"ViewMode":0,"SmallViewShown":true,"HasSignature":true},"StartTimeNode":{"ObjectName":"Scenario::TimeSyncModel","id":0,"Metadata":{"ScriptingName":"Sync.start","Comment":"","Color":"Gray","Label":"","Touched":true},"Date":0,"Events":[0],"MusicalSync":-1.0,"AutoTrigger":false,"Start":true,"Active":false,"Expression":" { true == false } "},"EndTimeNode":{"ObjectName":"Scenario::TimeSyncModel","id":1,"Metadata":{"ScriptingName":"Sync.end","Comment":"","Color":"Gray","Label":"","Touched":true},"Date":10584000000,"Events":[1],"MusicalSync":-1.0,"AutoTrigger":false,"Start":false,"Active":true,"Expression":" { true == false } "},"StartEvent":{"ObjectName":"Scenario::EventModel","id":0,"Metadata":{"ScriptingName":"Event.start","Comment":"","Color":"Emphasis4","Label":"","Touched":true},"TimeNode":0,"States":[0],"Condition":"","Date":0,"Offset":0},"EndEvent":{"ObjectName":"Scenario::EventModel","id":1,"Metadata":{"ScriptingName":"Event.end","Comment":"","Color":"Emphasis4","Label":"","Touched":true},"TimeNode":1,"States":[1],"Condition":"","Date":10584000000,"Offset":0},"StartState":{"ObjectName":"Scenario::StateModel","id":0,"Metadata":{"ScriptingName":"State.start","Comment":"","Color":"Base1","Label":"","Touched":true},"Event":0,"PreviousConstraint":null,"NextConstraint":0,"HeightPercentage":0.0,"Messages":{"Name":"","Accessors":[],"Unit":"none","Previous":[],"Following":[],"User":null,"Priorities":[1,2,0]},"Controls":[],"StateProcesses":[]},"EndState":{"ObjectName":"Scenario::StateModel","id":1,"Metadata":{"ScriptingName":"State.end","Comment":"","Color":"Base1","Label":"","Touched":true},"Event":1,"PreviousConstraint":0,"NextConstraint":null,"HeightPercentage":0.0,"Messages":{"Name":"","Accessors":[],"Unit":"none","Previous":[],"Following":[],"User":null,"Priorities":[1,2,0]},"Controls":[],"StateProcesses":[]}},"Speed":0.641,"Cables":[{"ObjectName":"Process::Cable","id":2,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":3},{"ObjectName":"Outlet","ObjectId":1}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":6},{"ObjectName":"Inlet","ObjectId":0}]},{"ObjectName":"Process::Cable","id":4,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":7},{"ObjectName":"Outlet","ObjectId":1}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":3},{"ObjectName":"Inlet","ObjectId":0}]},{"ObjectName":"Process::Cable","id":3,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"Javascript","ObjectId":4},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":7},{"ObjectName":"Inlet","ObjectId":0}]},{"ObjectName":"Process::Cable","id":6,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"MathGenerator","ObjectId":10},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"Javascript","ObjectId":4},{"ObjectName":"Inlet","ObjectId":2}]},{"ObjectName":"Process::Cable","id":7,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"Sound","ObjectId":11},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"Peak","ObjectId":12},{"ObjectName":"Inlet","ObjectId":0}]},{"ObjectName":"Process::Cable","id":8,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"Peak","ObjectId":12},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"avnd_expsmooth","ObjectId":13},{"ObjectName":"Inlet","ObjectId":0}]},{"ObjectName":"Process::Cable","id":9,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"avnd_expsmooth","ObjectId":13},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":3},{"ObjectName":"Inlet","ObjectId":1}]},{"ObjectName":"Process::Cable","id":10,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"avnd_expsmooth","ObjectId":13},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":7},{"ObjectName":"Inlet","ObjectId":2}]},{"ObjectName":"Process::Cable","id":11,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"avnd_expsmooth","ObjectId":13},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":6},{"ObjectName":"Inlet","ObjectId":2}]},{"ObjectName":"Process::Cable","id":14,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"LFO","ObjectId":16},{"ObjectName":"Outlet","ObjectId":0}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":15},{"ObjectName":"Inlet","ObjectId":6}]},{"ObjectName":"Process::Cable","id":17,"Type":0,"Source":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":6},{"ObjectName":"Outlet","ObjectId":1}],"Sink":[{"ObjectName":"Scenario::ScenarioDocumentModel","ObjectId":1},{"ObjectName":"Scenario::BaseScenario","ObjectId":0},{"ObjectName":"Scenario::IntervalModel","ObjectId":0},{"ObjectName":"gfxProcess","ObjectId":15},{"ObjectName":"Inlet","ObjectId":0}]}],"BusIntervals":[]},"Plugins":[{"uuid":"1f923578-08c3-49be-9ba9-69c144ee2e32","Refresh":false,"Reconnect":false,"MidiRatio":1.0},{"uuid":"6e610e1f-9de2-4c36-90dd-0ef570002a21","RootNode":{},"Children":[{"Device":{"Name":"Window","Protocol":"5a181207-7d40-4ad8-814e-879fcdf8cc31","Background":false},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Int":0},"Domain":{"Int":{"Min":0,"Max":100}},"Name":"screen"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{},"Name":"position"}},{"Address":{"ClipMode":"Free","RepetitionFilter":false,"Value":{},"Domain":{},"Name":"cursor"},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{"Float":{"Min":0.0,"Max":1.0}},"Name":"scaled"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{"Vec2f":{"Min":[0.0,0.0],"Max":[1280.0,720.0],"Values":[[],[]]}},"Name":"absolute"}}]},{"Address":{"ClipMode":"Free","RepetitionFilter":false,"Value":{},"Domain":{},"Name":"tablet"},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{"Float":{"Min":0.0,"Max":1.0}},"Name":"scaled"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{"Vec2f":{"Min":[0.0,0.0],"Max":[1280.0,720.0],"Values":[[],[]]}},"Name":"absolute"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Int":0},"Domain":{},"Name":"z"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Float":0.0},"Domain":{},"Name":"pressure"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Float":0.0},"Domain":{"Float":{"Min":-1.0,"Max":1.0}},"Name":"tangential"}},{"Address":{"ioType":"<->","ClipMode":"Free","Unit":"angle.degree","RepetitionFilter":false,"Value":{"Float":0.0},"Domain":{"Float":{"Min":-180.0,"Max":180.0}},"Name":"rotation"}},{"Address":{"ioType":"<->","ClipMode":"Free","Unit":"angle.degree","RepetitionFilter":false,"Value":{"Float":0.0},"Domain":{"Float":{"Min":-60.0,"Max":60.0}},"Name":"tilt_x"}},{"Address":{"ioType":"<->","ClipMode":"Free","Unit":"angle.degree","RepetitionFilter":false,"Value":{"Float":0.0},"Domain":{"Float":{"Min":-60.0,"Max":60.0}},"Name":"tilt_y"}}]},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[1280.0,720.0]},"Domain":{},"Name":"size"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{},"Extended":{"description":"Set to [0, 0] to use the viewport's size"},"Name":"rendersize"}},{"Address":{"ClipMode":"Free","RepetitionFilter":false,"Value":{},"Domain":{},"Name":"key"},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Int":0},"Domain":{},"Name":"code"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"String":""},"Domain":{},"Name":"text"}}]},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Bool":false},"Domain":{},"Name":"fullscreen"}}]}]},{"uuid":"05e72689-e02c-4c9d-a0bf-fe84c32d3d96","Data":""}],"Version":4,"Commit":"7f4e56887580b07913632f9b6a26dfb3ef046d33","Tag":"3.7.1"}